<div class="product-detail-container" *ngIf="product$ | async as product; else loadingOrError">
  <ng-container *ngIf="product; else notFound">
    <a routerLink="/products" class="back-link">&laquo; Back to Products</a>
    <div class="product-layout">
      <div class="product-image">
        <img [src]="product.imageUrl || 'https://via.placeholder.com/300?text=No+Image'" [alt]="product.name">
      </div>
      <div class="product-info">
        <h2>{{ product.name }}</h2>
        <p class="price">{{ product.price | currency:'USD' }}</p>
        <p class="description">{{ product.description || 'No description available.' }}</p>

        <!-- Placeholder for category/brand if available and desired -->
        <!-- <p *ngIf="product.categoryName">Category: {{ product.categoryName }}</p> -->
        <!-- <p *ngIf="product.brandName">Brand: {{ product.brandName }}</p> -->

        <button class="add-to-cart-btn" (click)="addToCart(product)">Add to Cart</button>
      </div>
    </div>
  </ng-container>
</div>

<ng-template #notFound>
  <p>Product not found. <a routerLink="/products">Return to products list</a>.</p>
</ng-template>

<ng-template #loadingOrError>
  <!-- This template can be more sophisticated to distinguish loading from an error -->
  <p>Loading product details...</p>
</ng-template>
